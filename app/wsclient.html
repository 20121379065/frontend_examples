<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>WebSocket Client</title>
</head>
<body>
	<div id="output"></div>
	<input type="text" id="input" />
	<button id="send-button">发送</button>

<script>
(function() {
	window.WebSocket
	var connection = new WebSocket('ws://127.0.0.1:1337');

    connection.onopen = function () {
        var sendButton = document.getElementById('send-button')
        sendButton.addEventListener('click', function(){
            var text = document.getElementById('input').value
            connection.send(text)

        })
    };

    connection.onerror = function (error) {
        // an error occurred when sending/receiving data
    };

    connection.onmessage = function (message) {
        var output = document.getElementById('output'),
            p = document.createElement('p'),
            t = document.createTextNode(message.data); 
        
        p.appendChild(t) 
        output.appendChild(p)
        
    };


	
})()


</script>

</body>
</html>

